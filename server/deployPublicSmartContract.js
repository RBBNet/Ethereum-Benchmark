const {web3} = require("./pantheon_utils/web3")
const {deploySmartContract} = require('./pantheon_utils/web3Operations')
//binary to deploy the smart contract

const simpleStorageByteCode =  "0x6080604052600080546001600160a01b03191673dd37c69ff29c4b93a346ed6df184f48a71800b7e17905534801561003657600080fd5b506100486001600160e01b0361006d16565b600180546001600160a01b0319166001600160a01b0392909216919091179055610157565b6000805460408051600481526024810182526020810180516001600160e01b0316637a6ce2e160e01b178152915181516060946001600160a01b03169382918083835b602083106100cf5780518252601f1990920191602091820191016100b0565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114610131576040519150601f19603f3d011682016040523d82523d6000602084013e610136565b606091505b5080519092506020808401925081101561014f57600080fd5b505191505090565b610252806101666000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806320965255146100465780636057361d1461006057806367e404ce1461007f575b600080fd5b61004e6100a3565b60408051918252519081900360200190f35b61007d6004803603602081101561007657600080fd5b50356100a9565b005b610087610123565b604080516001600160a01b039092168252519081900360200190f35b60035490565b7fc9db20adedc6cf2b5d25252b101ab03e124902a73fcb12b753f3d1aaa2d8f9f56100d2610132565b604080516001600160a01b039092168252602082018490528051918290030190a16003819055610100610132565b600280546001600160a01b0319166001600160a01b039290921691909117905550565b6002546001600160a01b031690565b6000805460408051600481526024810182526020810180516001600160e01b0316637a6ce2e160e01b178152915181516060946001600160a01b03169382918083835b602083106101945780518252601f199092019160209182019101610175565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d80600081146101f6576040519150601f19603f3d011682016040523d82523d6000602084013e6101fb565b606091505b5080519092506020808401925081101561021457600080fd5b50519150509056fea264697066735822122072e68dfe713618727700cd323d53f1b672b627124dd773527a08904d16fce40964736f6c63430006020033"

const david19Bytecode = "0x608060405234801561001057600080fd5b50610cc2806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c8063b75c7dc614610046578063b88fbd2d1461008c578063d2ae498d146100f2575b600080fd5b6100726004803603602081101561005c57600080fd5b81019080803590602001909291905050506101b2565b604051808215151515815260200191505060405180910390f35b6100d8600480360360408110156100a257600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610545565b604051808215151515815260200191505060405180910390f35b610198600480360361012081101561010957600080fd5b8101908080359060200190929190803590602001909291908035906020019092919080359060200190929190803560ff169060200190929190803560ff169060200190929190803579ffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190803560ff169060200190929190803560ff169060200190929190505050610770565b604051808215151515815260200191505060405180910390f35b60008060008084815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b81600001541415610283576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f63726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80600401600a9054906101000a900460ff16610307576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c20697320616c7265616479207265766f6b656400000081525060200191505060405180910390fd5b600081600401600a6101000a81548160ff0219169083151502179055508060008085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff021916908360038111156103cd57fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff0219169083600481111561046457fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff0219169083600781111561049a57fe5b021790555060048201600a9054906101000a900460ff1681600401600a6101000a81548160ff021916908315150217905550905050827f80d4746828447d65eceb938c7f9d85fbeb232fe7819d5209ed452b3940f8904b3342604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a26001915050919050565b600061054f610bf4565b60008085815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060405180610140016040529081600082015481526020016001820154815260200160028201548152602001600382015481526020016004820160009054906101000a900460ff1660038111156105f057fe5b60038111156105fb57fe5b81526020016004820160019054906101000a900460ff1660ff1660ff1681526020016004820160029054906101000a900460d01b79ffffffffffffffffffffffffffffffffffffffffffffffffffff191679ffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020016004820160089054906101000a900460ff16600481111561068b57fe5b600481111561069657fe5b81526020016004820160099054906101000a900460ff1660078111156106b857fe5b60078111156106c357fe5b815260200160048201600a9054906101000a900460ff16151515158152505090506000801b81600001511415610761576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80610120015191505092915050565b6000806000808c815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b816000015414610840576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f43726564656e7469616c20494420616c7265616479206578697374730000000081525060200191505060405180910390fd5b8981600001819055508881600101819055506103e842028160020181905550878160030181905550868160040160006101000a81548160ff0219169083600381111561088857fe5b0217905550858160040160016101000a81548160ff021916908360ff160217905550848160040160026101000a81548165ffffffffffff021916908360d01c0217905550838160040160086101000a81548160ff021916908360048111156108ec57fe5b0217905550828160040160096101000a81548160ff0219169083600781111561091157fe5b0217905550600181600401600a6101000a81548160ff021916908315150217905550806000808d815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff021916908360038111156109dc57fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff02191690836004811115610a7357fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff02191690836007811115610aa957fe5b021790555060048201600a9054906101000a900460ff1681600401600a6101000a81548160ff0219169083151502179055509050508a7fb63f373d7241d415ff725faa8c7def04dee5b4bd089fb60925610470fbedbaa4338c8c85600201548c8b8b8b604051808973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001888152602001878152602001868152602001856003811115610b6057fe5b60ff1681526020018479ffffffffffffffffffffffffffffffffffffffffffffffffffff191679ffffffffffffffffffffffffffffffffffffffffffffffffffff19168152602001836004811115610bb457fe5b60ff168152602001826007811115610bc857fe5b60ff1681526020019850505050505050505060405180910390a260019150509998505050505050505050565b6040518061014001604052806000801916815260200160008152602001600081526020016000815260200160006003811115610c2c57fe5b8152602001600060ff168152602001600079ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200160006004811115610c6c57fe5b815260200160006007811115610c7e57fe5b8152602001600015158152509056fea265627a7a7231582086fbc93e3262831256c1226d4ed3685aed5b0e6ccfa953f17182c0fea3dd70f064736f6c63430005110032"

const kaytrustIM="0x6080604052600080546001600160a01b03191673dd37c69ff29c4b93a346ed6df184f48a71800b7e17905534801561003657600080fd5b50600060405161004590610088565b604051809103906000f080158015610061573d6000803e3d6000fd5b50600180546001600160a01b0319166001600160a01b039290921691909117905550610095565b6106dc8061123583390190565b611191806100a46000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c806373b40a5c1161006657806373b40a5c14610118578063781f5a831461012b57806399a88ec41461013e578063a3effe8b14610151578063e12553f51461016457600080fd5b8063140c5a4e1461009857806359d21ad9146100c057806360a98bd6146100e057806361a3923714610103575b600080fd5b6100ab6100a6366004610e1f565b610177565b60405190151581526020015b60405180910390f35b6100c86101e9565b6040516001600160a01b0390911681526020016100b7565b6100ab6100ee366004610e81565b60026020526000908152604090205460ff1681565b610116610111366004610e9e565b6102cf565b005b610116610126366004610ee4565b610357565b610116610139366004610f64565b610493565b61011661014c366004610f64565b61062b565b61011661015f366004610f9d565b61086e565b610116610172366004610e81565b6109ee565b6001600160a01b03808416600090815260036020908152604080832093861683529290528181209151909182916101af90859061103d565b908152604080519182900360209081018320838301909252815483526001909101549082015290506101e081610b13565b95945050505050565b6001546000908190610203906001600160a01b0316610b49565b6001600160a01b03811660008181526002602052604090819020805460ff191660011790555163189acdbd60e31b8152306004820152919250829163c4d66de890602401600060405180830381600087803b15801561026157600080fd5b505af1158015610275573d6000803e3d6000fd5b5050505061028d81610285610be6565b426000610c8c565b6040516001600160a01b03831681527fac993fde3b9423ff59e4a23cded8e89074c9c8740920d1d870f586ba7c5c8cf09060200160405180910390a150919050565b6102f6848460405180604001604052806002815260200161667760f01b815250858561086e565b61031f8484604051806040016040528060048152602001630c2eae8d60e31b815250858561086e565b61035184846040518060400160405280600d81526020016c3232bb34b1b2b6b0b730b3b2b960991b815250858561086e565b50505050565b8360405180604001604052806002815260200161667760f01b815250600060036000846001600160a01b03166001600160a01b0316815260200190815260200160002060006103a4610be6565b6001600160a01b03166001600160a01b03168152602001908152602001600020826040516103d2919061103d565b9081526040805191829003602090810183208383019092528154835260019091015490820152905061040381610b13565b6104285760405162461bcd60e51b815260040161041f90611059565b60405180910390fd5b60405163d7f31eb960e01b81526001600160a01b0388169063d7f31eb990610458908990899089906004016110b5565b600060405180830381600087803b15801561047257600080fd5b505af1158015610486573d6000803e3d6000fd5b5050505050505050505050565b6001600160a01b03821660009081526002602052604090205460ff16156105085760405162461bcd60e51b815260206004820152602360248201527f416c72656164792072656769737465726564206f6e2074686174206964656e7460448201526269747960e81b606482015260840161041f565b6001600160a01b03821660008181526002602052604090819020805460ff19166001179055516317aa5fb760e11b8152306004820152632f54bf6e90602401602060405180830381865afa158015610564573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061058891906110dc565b6105de5760405162461bcd60e51b815260206004820152602160248201527f49276d206e6f7420616e206f776e6572206f662074686174206964656e7469746044820152607960f81b606482015260840161041f565b6105eb8282426000610c8c565b6040516001600160a01b03831681527fcae2f416e2ab213d7907943e6c1cf701343f6415fd0be1f0c3db985222ca04a59060200160405180910390a15050565b816040518060400160405280600581526020016430b236b4b760d91b815250600060036000846001600160a01b03166001600160a01b03168152602001908152602001600020600061067b610be6565b6001600160a01b03166001600160a01b03168152602001908152602001600020826040516106a9919061103d565b908152604080519182900360209081018320838301909252815483526001909101549082015290506106da81610b13565b6106f65760405162461bcd60e51b815260040161041f90611059565b604051630e0cb96960e31b81526001600160a01b038581166004830152861690637065cb4890602401600060405180830381600087803b15801561073957600080fd5b505af115801561074d573d6000803e3d6000fd5b50505050846001600160a01b031663b15be2f56040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561078c57600080fd5b505af11580156107a0573d6000803e3d6000fd5b50505050836001600160a01b031663781f5a83866107bc610be6565b6040516001600160e01b031960e085901b1681526001600160a01b03928316600482015291166024820152604401600060405180830381600087803b15801561080457600080fd5b505af1158015610818573d6000803e3d6000fd5b50505050610825856109ee565b604080513081526001600160a01b03861660208201527f5d611f318680d00598bb735d61bacf0c514c6b50e1e5ad30040a4df2b12791c791015b60405180910390a15050505050565b846040518060400160405280600d81526020016c3232bb34b1b2b6b0b730b3b2b960991b815250600060036000846001600160a01b03166001600160a01b0316815260200190815260200160002060006108c6610be6565b6001600160a01b03166001600160a01b03168152602001908152602001600020826040516108f4919061103d565b9081526040805191829003602090810183208383019092528154835260019091015490820152905061092581610b13565b6109415760405162461bcd60e51b815260040161041f90611059565b60408051808201825286815260208082018790526001600160a01b03808c16600090815260038352848120918c1681529152829020915190919061098690899061103d565b9081526040519081900360209081018220835181559201516001909201919091557f80739aafc1752b2e2276f4acdc567b6fd0391e87e67945f1de5242035ca228a6906109dc908a908a908a908a908a906110fe565b60405180910390a15050505050505050565b806040518060400160405280600581526020016430b236b4b760d91b815250600060036000846001600160a01b03166001600160a01b031681526020019081526020016000206000610a3e610be6565b6001600160a01b03166001600160a01b0316815260200190815260200160002082604051610a6c919061103d565b90815260408051918290036020908101832083830190925281548352600190910154908201529050610a9d81610b13565b610ab95760405162461bcd60e51b815260040161041f90611059565b6001600160a01b038416600081815260026020908152604091829020805460ff1916905590519182527f20f455568a172eeed867c6a177458b42607b460b4fe04d85e74817ef79df4b32910160405180910390a150505050565b805160009015801590610b27575081514210155b8015610b435750816020015142111580610b4357506020820151155b92915050565b6000604051733d602d80600a3d3981f3363d3d373d3d3d363d7360601b81528260601b60148201526e5af43d82803e903d91602b57fd5bf360881b60288201526037816000f09150506001600160a01b038116610be15760405162461bcd60e51b8152602060048201526016602482015275115490cc4c4d8dce8818dc99585d194819985a5b195960521b604482015260640161041f565b919050565b6000805460408051600481526024810182526020810180516001600160e01b0316637a6ce2e160e01b17905290516060926001600160a01b031691610c2a9161103d565b6000604051808303816000865af19150503d8060008114610c67576040519150601f19603f3d011682016040523d82523d6000602084013e610c6c565b606091505b508051909250610c8691508201602090810190830161113e565b91505090565b61035184846040518060400160405280600d81526020016c3232bb34b1b2b6b0b730b3b2b960991b815250858560408051808201825283815260208082018490526001600160a01b03808916600090815260038352848120918916815291528290209151909190610cfe90869061103d565b9081526040519081900360209081018220835181559201516001909201919091557f80739aafc1752b2e2276f4acdc567b6fd0391e87e67945f1de5242035ca228a69061085f90879087908790879087906110fe565b6001600160a01b0381168114610d6957600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b600067ffffffffffffffff80841115610d9d57610d9d610d6c565b604051601f8501601f19908116603f01168101908282118183101715610dc557610dc5610d6c565b81604052809350858152868686011115610dde57600080fd5b858560208301376000602087830101525050509392505050565b600082601f830112610e0957600080fd5b610e1883833560208501610d82565b9392505050565b600080600060608486031215610e3457600080fd5b8335610e3f81610d54565b92506020840135610e4f81610d54565b9150604084013567ffffffffffffffff811115610e6b57600080fd5b610e7786828701610df8565b9150509250925092565b600060208284031215610e9357600080fd5b8135610e1881610d54565b60008060008060808587031215610eb457600080fd5b8435610ebf81610d54565b93506020850135610ecf81610d54565b93969395505050506040820135916060013590565b60008060008060808587031215610efa57600080fd5b8435610f0581610d54565b93506020850135610f1581610d54565b925060408501359150606085013567ffffffffffffffff811115610f3857600080fd5b8501601f81018713610f4957600080fd5b610f5887823560208401610d82565b91505092959194509250565b60008060408385031215610f7757600080fd5b8235610f8281610d54565b91506020830135610f9281610d54565b809150509250929050565b600080600080600060a08688031215610fb557600080fd5b8535610fc081610d54565b94506020860135610fd081610d54565b9350604086013567ffffffffffffffff811115610fec57600080fd5b610ff888828901610df8565b9598949750949560608101359550608001359392505050565b60005b8381101561102c578181015183820152602001611014565b838111156103515750506000910152565b6000825161104f818460208701611011565b9190910192915050565b60208082526016908201527510d85c18589a5b1a5d1e481b9bdd08185b1b1bddd95960521b604082015260600190565b600081518084526110a1816020860160208601611011565b601f01601f19169290920160200192915050565b60018060a01b03841681528260208201526060604082015260006101e06060830184611089565b6000602082840312156110ee57600080fd5b81518015158114610e1857600080fd5b6001600160a01b0386811682528516602082015260a06040820181905260009061112a90830186611089565b606083019490945250608001529392505050565b60006020828403121561115057600080fd5b8151610e1881610d5456fea2646970667358221220f56076d1e7b3d96e28bf4584a753926d1747b9f425a6cc4a19594ba08318a71e64736f6c634300080a003360806040526000805462010000600160b01b03191675dd37c69ff29c4b93a346ed6df184f48a71800b7e000017905534801561003a57600080fd5b506106928061004a6000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063022914a7146100675780632f54bf6e1461009e5780637065cb48146100ca578063b15be2f5146100df578063c4d66de8146100e7578063d7f31eb9146100fa575b600080fd5b61008a61007536600461048c565b60016020526000908152604090205460ff1681565b604051901515815260200160405180910390f35b61008a6100ac36600461048c565b6001600160a01b031660009081526001602052604090205460ff1690565b6100dd6100d836600461048c565b61010d565b005b6100dd610170565b6100dd6100f536600461048c565b6101f9565b6100dd6101083660046104c6565b610205565b6101186100ac6102f0565b61012157600080fd5b6001600160a01b0381166000818152600160208190526040808320805460ff1916909217909155517f994a936646fe87ffe4f1e469d3d6aa417d6b855598397f323de5b449f765f0c39190a250565b61017b6100ac6102f0565b61018457600080fd5b6000600160006101926102f0565b6001600160a01b031681526020810191909152604001600020805460ff19169115159190911790556101c26102f0565b6001600160a01b03167f58619076adf5bb0943d100ef88d52d7c3fd691b19d3a9071b555b651fbf418da60405160405180910390a2565b6102028161039d565b50565b6102106100ac6102f0565b61021957600080fd5b600080846001600160a01b0316848460405161023591906105c3565b60006040518083038185875af1925050503d8060008114610272576040519150601f19603f3d011682016040523d82523d6000602084013e610277565b606091505b50915091508181906102a55760405162461bcd60e51b815260040161029c919061060b565b60405180910390fd5b50846001600160a01b03167fc1de93dfa06362c6a616cde73ec17d116c0d588dd1df70f27f91b500de207c4185856040516102e192919061061e565b60405180910390a25050505050565b6000805460408051600481526024810182526020810180516001600160e01b0316637a6ce2e160e01b17905290516060926001600160a01b0362010000909104169161033b916105c3565b6000604051808303816000865af19150503d8060008114610378576040519150601f19603f3d011682016040523d82523d6000602084013e61037d565b606091505b50805190925061039791508201602090810190830161063f565b91505090565b600054610100900460ff16806103b6575060005460ff16155b6104195760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840161029c565b600054610100900460ff1615801561043b576000805461ffff19166101011790555b6001600160a01b0382166000908152600160208190526040909120805460ff191690911790558015610473576000805461ff00191690555b5050565b6001600160a01b038116811461020257600080fd5b60006020828403121561049e57600080fd5b81356104a981610477565b9392505050565b634e487b7160e01b600052604160045260246000fd5b6000806000606084860312156104db57600080fd5b83356104e681610477565b925060208401359150604084013567ffffffffffffffff8082111561050a57600080fd5b818601915086601f83011261051e57600080fd5b813581811115610530576105306104b0565b604051601f8201601f19908116603f01168101908382118183101715610558576105586104b0565b8160405282815289602084870101111561057157600080fd5b8260208601602083013760006020848301015280955050505050509250925092565b60005b838110156105ae578181015183820152602001610596565b838111156105bd576000848401525b50505050565b600082516105d5818460208701610593565b9190910192915050565b600081518084526105f7816020860160208601610593565b601f01601f19169290920160200192915050565b6020815260006104a960208301846105df565b82815260406020820152600061063760408301846105df565b949350505050565b60006020828403121561065157600080fd5b81516104a98161047756fea2646970667358221220c16f134f7009b4693a86a7a9e6d9dc1466214b01d0c0d794d0e05788344c765364736f6c634300080a0033"

web3.transactionConfirmationBlocks = 1;

const SMART_CONTRACT_OPTION  = parseInt(process.env.SMART_CONTRACT_OPTION)

const addressFrom = '0xfe3b557e8fb62b89f4916b721be55ceb828dbd73'
const privKey = Buffer.from('8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63', 'hex')

const nodeAddress = '0xd00e6624a73f88b39f82ab34e8bf2b4d226fd768';
const expiration = 1636394529;
let valueAdd= web3.eth.abi.encodeParameters(
  ["address","uint256"],
  [nodeAddress,expiration]);

console.log("valueAdd" + valueAdd.substr(2))

let contractData

const chooseSmartByteCode = () => {
  if (SMART_CONTRACT_OPTION==0){
    contractData = simpleStorageByteCode +  valueAdd.substr(2);
  }else if (SMART_CONTRACT_OPTION==1){
    contractData = david19Bytecode
  } else if (SMART_CONTRACT_OPTION ==2){
    console.log("Selecting kaytrust IM...")
    contractData= kaytrustIM
  }
}

chooseSmartByteCode()

const deploy = async () => {
  console.log("#######################Deploying smart contract#######################")
  return await deploySmartContract(contractData,addressFrom,privKey)
}

module.exports = {
  deploy
}