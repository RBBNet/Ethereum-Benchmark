const {web3} = require("./pantheon_utils/web3")
const {deploySmartContract} = require('./pantheon_utils/web3Operations')
//binary to deploy the smart contract
const simpleStorageByteCode = "0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610221806100606000396000f300608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063209652551461005c578063552410771461008757806367e404ce146100b4575b600080fd5b34801561006857600080fd5b5061007161010b565b6040518082815260200191505060405180910390f35b34801561009357600080fd5b506100b260048036038101908080359060200190929190505050610115565b005b3480156100c057600080fd5b506100c96101cb565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6000600254905090565b7fc9db20adedc6cf2b5d25252b101ab03e124902a73fcb12b753f3d1aaa2d8f9f53382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a18060028190555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050905600a165627a7a7230582075c62564b30e771aa918ad342181ef3ae43a467d1823dadc5da945f5cf62713a0029"
const david19Bytecode = "0x608060405234801561001057600080fd5b50610cc2806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c8063b75c7dc614610046578063b88fbd2d1461008c578063d2ae498d146100f2575b600080fd5b6100726004803603602081101561005c57600080fd5b81019080803590602001909291905050506101b2565b604051808215151515815260200191505060405180910390f35b6100d8600480360360408110156100a257600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610545565b604051808215151515815260200191505060405180910390f35b610198600480360361012081101561010957600080fd5b8101908080359060200190929190803590602001909291908035906020019092919080359060200190929190803560ff169060200190929190803560ff169060200190929190803579ffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190803560ff169060200190929190803560ff169060200190929190505050610770565b604051808215151515815260200191505060405180910390f35b60008060008084815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b81600001541415610283576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f63726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80600401600a9054906101000a900460ff16610307576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c20697320616c7265616479207265766f6b656400000081525060200191505060405180910390fd5b600081600401600a6101000a81548160ff0219169083151502179055508060008085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff021916908360038111156103cd57fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff0219169083600481111561046457fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff0219169083600781111561049a57fe5b021790555060048201600a9054906101000a900460ff1681600401600a6101000a81548160ff021916908315150217905550905050827f80d4746828447d65eceb938c7f9d85fbeb232fe7819d5209ed452b3940f8904b3342604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a26001915050919050565b600061054f610bf4565b60008085815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060405180610140016040529081600082015481526020016001820154815260200160028201548152602001600382015481526020016004820160009054906101000a900460ff1660038111156105f057fe5b60038111156105fb57fe5b81526020016004820160019054906101000a900460ff1660ff1660ff1681526020016004820160029054906101000a900460d01b79ffffffffffffffffffffffffffffffffffffffffffffffffffff191679ffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020016004820160089054906101000a900460ff16600481111561068b57fe5b600481111561069657fe5b81526020016004820160099054906101000a900460ff1660078111156106b857fe5b60078111156106c357fe5b815260200160048201600a9054906101000a900460ff16151515158152505090506000801b81600001511415610761576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80610120015191505092915050565b6000806000808c815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b816000015414610840576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f43726564656e7469616c20494420616c7265616479206578697374730000000081525060200191505060405180910390fd5b8981600001819055508881600101819055506103e842028160020181905550878160030181905550868160040160006101000a81548160ff0219169083600381111561088857fe5b0217905550858160040160016101000a81548160ff021916908360ff160217905550848160040160026101000a81548165ffffffffffff021916908360d01c0217905550838160040160086101000a81548160ff021916908360048111156108ec57fe5b0217905550828160040160096101000a81548160ff0219169083600781111561091157fe5b0217905550600181600401600a6101000a81548160ff021916908315150217905550806000808d815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff021916908360038111156109dc57fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff02191690836004811115610a7357fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff02191690836007811115610aa957fe5b021790555060048201600a9054906101000a900460ff1681600401600a6101000a81548160ff0219169083151502179055509050508a7fb63f373d7241d415ff725faa8c7def04dee5b4bd089fb60925610470fbedbaa4338c8c85600201548c8b8b8b604051808973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001888152602001878152602001868152602001856003811115610b6057fe5b60ff1681526020018479ffffffffffffffffffffffffffffffffffffffffffffffffffff191679ffffffffffffffffffffffffffffffffffffffffffffffffffff19168152602001836004811115610bb457fe5b60ff168152602001826007811115610bc857fe5b60ff1681526020019850505050505050505060405180910390a260019150509998505050505050505050565b6040518061014001604052806000801916815260200160008152602001600081526020016000815260200160006003811115610c2c57fe5b8152602001600060ff168152602001600079ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200160006004811115610c6c57fe5b815260200160006007811115610c7e57fe5b8152602001600015158152509056fea265627a7a7231582086fbc93e3262831256c1226d4ed3685aed5b0e6ccfa953f17182c0fea3dd70f064736f6c63430005110032"
const david19RelayBytecode = "0x608060405273debcf74241333911d8801be8b965597eae8804186000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555034801561006457600080fd5b5061102d806100746000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063572b6c051461005157806357d7ed0b146100ab578063b75c7dc614610195578063b88fbd2d146101d9575b600080fd5b6100936004803603602081101561006757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061023d565b60405180821515815260200191505060405180910390f35b61017d60048036036101408110156100c257600080fd5b8101908080359060200190929190803590602001909291908035906020019092919080359060200190929190803560ff169060200190929190803560ff169060200190929190803579ffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190803560ff169060200190929190803560ff16906020019092919080357effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190505050610296565b60405180821515815260200191505060405180910390f35b6101c1600480360360208110156101ab57600080fd5b8101908080359060200190929190505050610776565b60405180821515815260200191505060405180910390f35b610225600480360360408110156101ef57600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610b23565b60405180821515815260200191505060405180910390f35b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16149050919050565b600080600160008d815260200190815260200160002060006102b6610daa565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b81600001541461036e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f43726564656e7469616c20494420616c7265616479206578697374730000000081525060200191505060405180910390fd5b8a81600001819055508981600101819055506103e842028160020181905550888160030181905550878160040160006101000a81548160ff021916908360038111156103b657fe5b0217905550868160040160016101000a81548160ff021916908360ff160217905550858160040160026101000a81548165ffffffffffff021916908360d01c0217905550848160040160086101000a81548160ff0219169083600481111561041a57fe5b0217905550838160040160096101000a81548160ff0219169083600981111561043f57fe5b02179055508281600401600a6101000a81548160ff021916908360f81c0217905550600181600401600b6101000a81548160ff02191690831515021790555080600160008e8152602001908152602001600020600061049c610daa565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff0219169083600381111561052f57fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff021916908360048111156105c657fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff021916908360098111156105fc57fe5b021790555060048201600a9054906101000a900460f81b81600401600a6101000a81548160ff021916908360f81c021790555060048201600b9054906101000a900460ff1681600401600b6101000a81548160ff0219169083151502179055509050508b7faa886e307a163b36f1d75e382327065465e16b16984f8fee74942fd3aebf6d93610689610daa565b8d8d85600201548d8d8d8d8d8d604051808b73ffffffffffffffffffffffffffffffffffffffff1681526020018a81526020018981526020018881526020018760038111156106d457fe5b81526020018660ff1681526020018579ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200184600481111561071157fe5b815260200183600981111561072257fe5b8152602001827effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020019a505050505050505050505060405180910390a260019150509a9950505050505050505050565b6000806001600084815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090506000801b81600001541415610848576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f63726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80600401600b9054906101000a900460ff166108cc576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c20697320616c7265616479207265766f6b656400000081525060200191505060405180910390fd5b600081600401600b6101000a81548160ff021916908315150217905550806001600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082015481600001556001820154816001015560028201548160020155600382015481600301556004820160009054906101000a900460ff168160040160006101000a81548160ff0219169083600381111561099357fe5b02179055506004820160019054906101000a900460ff168160040160016101000a81548160ff021916908360ff1602179055506004820160029054906101000a900460d01b8160040160026101000a81548165ffffffffffff021916908360d01c02179055506004820160089054906101000a900460ff168160040160086101000a81548160ff02191690836004811115610a2a57fe5b02179055506004820160099054906101000a900460ff168160040160096101000a81548160ff02191690836009811115610a6057fe5b021790555060048201600a9054906101000a900460f81b81600401600a6101000a81548160ff021916908360f81c021790555060048201600b9054906101000a900460ff1681600401600b6101000a81548160ff021916908315150217905550905050827f80d4746828447d65eceb938c7f9d85fbeb232fe7819d5209ed452b3940f8904b3342604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a26001915050919050565b6000610b2d610f35565b6001600085815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060405180610160016040529081600082015481526020016001820154815260200160028201548152602001600382015481526020016004820160009054906101000a900460ff166003811115610bcf57fe5b6003811115610bda57fe5b81526020016004820160019054906101000a900460ff1660ff1660ff1681526020016004820160029054906101000a900460d01b79ffffffffffffffffffffffffffffffffffffffffffffffffffff191679ffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020016004820160089054906101000a900460ff166004811115610c6a57fe5b6004811115610c7557fe5b81526020016004820160099054906101000a900460ff166009811115610c9757fe5b6009811115610ca257fe5b815260200160048201600a9054906101000a900460f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200160048201600b9054906101000a900460ff16151515158152505090506000801b81600001511415610d9b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f43726564656e7469616c206861736820646f65736e277420657869737400000081525060200191505060405180910390fd5b80610140015191505092915050565b6000606060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166040516024016040516020818303038152906040527f7a6ce2e1000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040518082805190602001908083835b60208310610e9b5780518252602082019150602081019050602083039250610e78565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114610efd576040519150601f19603f3d011682016040523d82523d6000602084013e610f02565b606091505b50905080915050808060200190516020811015610f1e57600080fd5b810190808051906020019092919050505091505090565b6040518061016001604052806000801916815260200160008152602001600081526020016000815260200160006003811115610f6d57fe5b8152602001600060ff168152602001600079ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200160006004811115610fad57fe5b815260200160006009811115610fbf57fe5b815260200160007effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19168152602001600015158152509056fea26469706673582212204e7ab59d9f7710db820cd453fea50e42078145cf37b95e34d4d6c4cb07af977d64736f6c634300060c0033"
// set to 1 for faster validation in this course.
web3.transactionConfirmationBlocks = 1;

const SMART_CONTRACT_OPTION  = process.env.SMART_CONTRACT_OPTION

const addressFrom = '0xfe3b557e8fb62b89f4916b721be55ceb828dbd73'
const privKey = Buffer.from('8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63', 'hex')

let contractData

const chooseSmartByteCode = () => {
  if (SMART_CONTRACT_OPTION==0){
    contractData = simpleStorageByteCode
  }else if (SMART_CONTRACT_OPTION==1){
    contractData = david19Bytecode
  }
}

chooseSmartByteCode()

const deploy = async () => {
  console.log("#######################Deploying smart contract#######################")
  return await deploySmartContract(contractData,addressFrom,privKey)
}

module.exports = {
  deploy
}